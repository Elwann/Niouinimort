{"version":3,"sources":["bundle.min.js"],"names":["init$1","options","onGameStart$1","onGameStart","onNextQuestion$1","onNextQuestion","onGameEnd$1","onGameEnd","exports","start","_questions","currentQuestion","questions","call","nextQuestion","respond","response","q","today","Date","birth","death","dead","age","getFullYear","name","correct","length","end","onResponse","event","target","getAttribute","r","questioner","innerHTML","box","classList","add","next","addEventListener","isAlive","removeEventListener","isDead","question","forEach","names","remove","load","resolver","Questioner","init","random","DatabaseResolver","ready","arr","fn","this$1","this","i","l","document","querySelector","querySelectorAll"],"mappings":"AAYA,QAASA,QAAOC,GAIZ,MAHAC,eAAgBD,EAAQE,aAAgB,aACxCC,iBAAmBH,EAAQI,gBAAmB,aAC9CC,YAAcL,EAAQM,WAAc,aAC7BC,QAGX,QAASC,OAAMC,GAKX,MAJAC,oBACAC,UAAYF,EACZR,cAAcW,KAAKL,SACnBM,eACON,QAGX,QAASO,SAAQC,GACb,GAAIC,GAAIL,UAAUD,iBACdO,EAAQ,GAAIC,MACZC,EAAQ,GAAID,MAAKF,EAAEG,OACnBC,EAASJ,EAAO,MAAI,GAAIE,MAAKF,EAAEI,OAAS,KACxCC,EAAiB,MAATD,EACRE,EAAM,EACJF,EAAMG,cAAgBJ,EAAMI,cAC5BN,EAAMM,cAAgBJ,EAAMI,aAClC,QACIC,KAAMR,EAAEQ,KACRC,QAAUJ,IAASN,EACnBM,KAAMA,EACNC,IAAKA,GAIb,QAAST,gBAEL,QADEH,gBACCA,gBAAkBC,UAAUe,OAAO,MAClCC,WAIJxB,kBAAiBS,KAAKL,QAASI,UAAUD,kBAG7C,QAASiB,OACLtB,YAAYO,KAAKL,SAarB,QAASqB,YAAWC,GAChB,GAAIR,GAAOQ,EAAMC,OAAOC,aAAa,aACjCC,EAAIC,WAAWnB,QAAgB,QAARO,GAEvBI,EAAWO,EAAS,QAAI,OAAS,OACjCZ,EAASY,EAAM,KAAI,WAAa,IACpCjB,UAASmB,UAAYT,EAAU,MAAQL,EAAQ,MAAQY,EAAEV,IAAM,OAE/Da,IAAIC,UAAUC,IAAI,WAElBC,KAAKC,iBAAiB,QAASN,WAAWK,MAAM,GAChDE,QAAQC,oBAAoB,QAASb,YACrCc,OAAOD,oBAAoB,QAASb,YAGxC,QAAS1B,gBAIT,QAASE,gBAAeuC,GAEpBC,QAAQC,MAAO,SAASrB,GACpBA,EAAKU,UAAYS,EAASnB,OAG9BW,IAAIC,UAAUU,OAAO,WAErBR,KAAKG,oBAAoB,QAASR,WAAWK,MAAM,GACnDE,QAAQD,iBAAiB,QAASX,YAAY,GAC9Cc,OAAOH,iBAAiB,QAASX,YAAY,GAGjD,QAAStB,cAKT,QAASyC,MAAKC,GACVf,WAAagB,WAAWC,MACpBhD,YAAaA,YACbE,eAAgBA,eAChBE,UAAWA,YAEf2B,WAAWzB,MAAMwC,EAASG,OAAO,IAGrC,QAASD,QACLE,iBAAiBF,KAAK,yBAAyBG,MAAMN,MAGzD,QAASH,SAAQU,EAAKC,GAGlB,IAAI,GAFAC,GAASC,KAELC,EAAI,EAAGC,EAAIL,EAAI5B,OAAQgC,EAAEC,EAAGD,IAChCH,EAAG3C,KAAK4C,EAAQF,EAAII,GAAIA,EAAGC,GA1HnC,GAAIhD,cACAD,mBACAT,cACAE,iBACAE,YACA4C,YACAC,KAAMnD,OACNS,MAAOA,MACPM,QAASA,QACTwB,KAAMzB,cAiDNoB,WAEAE,IAAMyB,SAASC,cAAc,QAC7BhB,MAAQe,SAASE,iBAAiB,cAClC/C,SAAW6C,SAASC,cAAc,aAElCrB,QAAUoB,SAASC,cAAc,mBACjCnB,OAASkB,SAASC,cAAc,kBAChCvB,KAAOsB,SAASC,cAAc,cA2DlCX","file":"bundle.min.js","sourcesContent":["var questions = [];\r\nvar currentQuestion = -1;\r\nvar onGameStart$1;\r\nvar onNextQuestion$1;\r\nvar onGameEnd$1;\r\nvar Questioner = {\r\n    init: init$1,\r\n    start: start,\r\n    respond: respond,\r\n    next: nextQuestion\r\n};\r\n\r\nfunction init$1(options){\r\n    onGameStart$1 = options.onGameStart ||  function(){};\r\n    onNextQuestion$1 = options.onNextQuestion ||  function(){};\r\n    onGameEnd$1 = options.onGameEnd ||  function(){};\r\n    return exports\r\n}\r\n\r\nfunction start(_questions){\r\n    currentQuestion = -1;\r\n    questions = _questions;\r\n    onGameStart$1.call(exports);\r\n    nextQuestion();\r\n    return exports\r\n}\r\n\r\nfunction respond(response){\r\n    var q = questions[currentQuestion];\r\n    var today = new Date();\r\n    var birth = new Date(q.birth);\r\n    var death = (q.death) ? new Date(q.death) : null;\r\n    var dead = (death != null);\r\n    var age = (dead)\r\n        ? death.getFullYear() - birth.getFullYear()\r\n        : today.getFullYear() - birth.getFullYear();\r\n    return {\r\n        name: q.name,\r\n        correct: (dead === response),\r\n        dead: dead,\r\n        age: age\r\n    }\r\n}\r\n\r\nfunction nextQuestion(){\r\n    ++currentQuestion;\r\n    if(currentQuestion > questions.length-1){\r\n        end();\r\n        return\r\n    }\r\n\r\n    onNextQuestion$1.call(exports, questions[currentQuestion]);\r\n}\r\n\r\nfunction end(){\r\n    onGameEnd$1.call(exports);\r\n}\n\nvar questioner;\r\n\r\nvar box = document.querySelector('.box');\r\nvar names = document.querySelectorAll('.star-name');\r\nvar response = document.querySelector('.response');\r\n\r\nvar isAlive = document.querySelector('button.is-alive');\r\nvar isDead = document.querySelector('button.is-dead');\r\nvar next = document.querySelector('button.next');\r\n\r\nfunction onResponse(event){\r\n    var dead = event.target.getAttribute('data-dead');\r\n    var r = questioner.respond(dead == 'true');\r\n\r\n    var correct = (r.correct) ? 'Vrai' : 'Faux';\r\n    var death = (r.dead) ? 'Est mort' : 'Il';\r\n    response.innerHTML = correct + ' : ' + death + ' a ' + r.age + ' ans';\r\n\r\n    box.classList.add('flipped');\r\n\r\n    next.addEventListener('click', questioner.next, false);\r\n    isAlive.removeEventListener('click', onResponse);\r\n    isDead.removeEventListener('click', onResponse);\r\n}\r\n\r\nfunction onGameStart(){\r\n    // init game\r\n}\r\n\r\nfunction onNextQuestion(question){\r\n    // show question\r\n    forEach(names, function(name){\r\n        name.innerHTML = question.name;\r\n    });\r\n\r\n    box.classList.remove('flipped');\r\n\r\n    next.removeEventListener('click', questioner.next, false);\r\n    isAlive.addEventListener('click', onResponse, false);\r\n    isDead.addEventListener('click', onResponse, false);\r\n}\r\n\r\nfunction onGameEnd(){\r\n    // show score\r\n\r\n}\r\n\r\nfunction load(resolver){\r\n    questioner = Questioner.init({\r\n        onGameStart: onGameStart,\r\n        onNextQuestion: onNextQuestion,\r\n        onGameEnd: onGameEnd\r\n    });\r\n    questioner.start(resolver.random(3));\r\n}\r\n\r\nfunction init(){\r\n    DatabaseResolver.init('/assets/database.json').ready(load);\r\n}\r\n\r\nfunction forEach(arr, fn){\n    var this$1 = this;\n\r\n    for(var i = 0, l = arr.length; i<l; i++)\r\n        fn.call(this$1, arr[i], i, l);\r\n}\r\n\r\ninit();\n"]}